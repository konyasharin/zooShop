(()=>{"use strict";const t=document.querySelector(".form__registration"),e=document.querySelector(".form__choose"),n=document.querySelector(".modal");function o(){localStorage.getItem("login")&&localStorage.getItem("email")&&(c.style.display="none",i.style.display="flex")}function l(){n.style.display="none",e.style.display="flex",a.style.display="none",t.style.display="none"}const r=document.querySelector("#entryChoose"),s=document.querySelector("#registrationChoose"),i=document.querySelector(".header__wrapper"),a=document.querySelector(".form__entry"),c=document.querySelector("#entry"),y=function(){c.addEventListener("click",(()=>{n.style.display="flex"})),a.addEventListener("submit",(t=>{t.preventDefault();const e=a.querySelectorAll("input");let n=[];e.forEach((t=>{n.push(t.value)}));let[r,s]=n;fetch("https://iamnikolay.store/zoo/php/entry.php",{method:"POST",body:JSON.stringify({login:r,password:s}),headers:{"Content-type":"application/json"}}).then((t=>t.json())).then((t=>function(t){return t.hasOwnProperty("error")?a.querySelector(".error").textContent=t.error:function(t){l(),localStorage.setItem("login",t.login),localStorage.setItem("email",t.email),o()}(t),t}(t))).catch((t=>console.log(`Ошибка: ${t}`)))}))};function d(t,e){t.forEach((t=>{t.classList.contains(e)&&t.classList.remove(e)}))}const p=document.querySelectorAll(".items__nav-btn"),u=document.querySelector(".items__nav-continue"),g=document.querySelectorAll(".filter__btn"),h=document.querySelectorAll(".reviews__btn"),m=document.querySelectorAll(".round"),_=document.querySelector(".main__img");document.addEventListener("DOMContentLoaded",(()=>{y(),t.addEventListener("submit",(e=>{e.preventDefault();const n=t.querySelectorAll("input");let r=[];n.forEach((t=>{r.push(t.value)}));let[s,i,a,c]=r;a!==c?t.querySelector(".error").textContent="Пароли не совпадают":fetch("https://iamnikolay.store/zoo/php/registration.php",{method:"POST",body:JSON.stringify({login:s,email:i,password:a}),headers:{"Content-type":"application/json"}}).then((t=>t.json())).then((e=>function(e){return e.hasOwnProperty("error")?t.querySelector(".error").textContent=e.error:(l(),localStorage.setItem("login",e.login),localStorage.setItem("email",e.email),o()),e}(e))).catch((t=>console.log(`Ошибка: ${t}`)))})),n.addEventListener("click",(o=>{o.target===n?l():o.target===r?(e.style.display="none",a.style.display="flex"):o.target===s&&(e.style.display="none",t.style.display="flex")})),o(),p.forEach((t=>{t.addEventListener("click",(()=>{if(d(p,"items__nav-btn_active"),fetch(`https://iamnikolay.store/zoo/php/pageToggle.php?page=${t.textContent}`).then((t=>t.json())).then((t=>console.log(t))).catch((t=>console.log(`Ошибка: ${t}`))),"1"!==t.textContent&&t.textContent<269){let e=[+t.textContent-1,+t.textContent,+t.textContent+1];p[0].textContent=e[0],p[1].textContent=e[1],p[2].textContent=e[2],p[1].classList.toggle("items__nav-btn_active"),u.style.display="inline"}else if("1"===t.textContent&&t.textContent<269)p[0].textContent="1",p[1].textContent="2",p[2].textContent="3",p[0].classList.toggle("items__nav-btn_active"),u.style.display="inline";else{let e=t.textContent;p[0].textContent="268",p[1].textContent="269",p[2].textContent="270",p[3].textContent="271";for(let t=0;t<4;t++)p[t].textContent===e&&p[t].classList.toggle("items__nav-btn_active");u.style.display="none"}}))})),g.forEach((t=>{t.addEventListener("click",(()=>{d(g,"filter__btn_active"),t.classList.toggle("filter__btn_active"),fetch(`https://iamnikolay.store/zoo/php/categoryToggle.php?category=${t.textContent}`).then((t=>t.json())).then((t=>console.log(t))).catch((t=>console.log(`Ошибка: ${t}`)))}))})),h.forEach((t=>{t.addEventListener("click",(()=>{d(h,"reviews__btn_active"),t.classList.toggle("reviews__btn_active");let e=void 0!==t.dataset.count?t.dataset.count:t.textContent;fetch(`https://iamnikolay.store/zoo/php/categoryReviewsToggle.php?category=${e}`).then((t=>t.json())).then((t=>console.log(t))).catch((t=>console.log(`Ошибка: ${t}`)))}))})),function(){for(let t=0;t<m.length;t++)window.addEventListener("mousemove",(function(e){let n=e.clientX/window.innerWidth,o=e.clientY/window.innerHeight;m[t].style.transform="translate(-"+50*n+"px, -"+50*o+"px)",_.style.transform="translate(-"+10*n+"px, -"+10*o+"px)"}))}()}))})();